{"version":3,"sources":["../../../../src/utils/storage.ts","../../../../src/app/dashboard/page.tsx","../../../../src/utils/fileUpload.ts"],"sourcesContent":["/**\n * Session storage utility for managing template and PDF data\n */\n\nexport const sessionStorage = {\n  // Template management\n  setSelectedTemplate: (template: any) => {\n    if (typeof window !== 'undefined') {\n      window.sessionStorage.setItem('selectedTemplate', JSON.stringify(template));\n      window.sessionStorage.removeItem('uploadedPdfName');\n      window.sessionStorage.removeItem('uploadedPdfDataUrl');\n    }\n  },\n\n  getSelectedTemplate: () => {\n    if (typeof window !== 'undefined') {\n      const templateRaw = window.sessionStorage.getItem('selectedTemplate');\n      if (templateRaw) {\n        try {\n          return JSON.parse(templateRaw);\n        } catch (error) {\n          console.error('Could not parse selectedTemplate', error);\n          return null;\n        }\n      }\n    }\n    return null;\n  },\n\n  clearSelectedTemplate: () => {\n    if (typeof window !== 'undefined') {\n      window.sessionStorage.removeItem('selectedTemplate');\n    }\n  },\n\n  // PDF management\n  setUploadedPdf: (fileName: string, dataUrl: string) => {\n    if (typeof window !== 'undefined') {\n      window.sessionStorage.setItem('uploadedPdfName', fileName);\n      window.sessionStorage.setItem('uploadedPdfDataUrl', dataUrl);\n      window.sessionStorage.removeItem('selectedTemplate');\n    }\n  },\n\n  getUploadedPdf: () => {\n    if (typeof window !== 'undefined') {\n      return {\n        name: window.sessionStorage.getItem('uploadedPdfName'),\n        dataUrl: window.sessionStorage.getItem('uploadedPdfDataUrl'),\n      };\n    }\n    return { name: null, dataUrl: null };\n  },\n\n  clearUploadedPdf: () => {\n    if (typeof window !== 'undefined') {\n      window.sessionStorage.removeItem('uploadedPdfName');\n      window.sessionStorage.removeItem('uploadedPdfDataUrl');\n    }\n  },\n\n  clearAll: () => {\n    if (typeof window !== 'undefined') {\n      window.sessionStorage.removeItem('selectedTemplate');\n      window.sessionStorage.removeItem('uploadedPdfName');\n      window.sessionStorage.removeItem('uploadedPdfDataUrl');\n    }\n  },\n};\n","'use client';\n\nimport Link from 'next/link';\nimport { useRef, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { handlePdfUpload } from '@/utils/fileUpload';\nimport { sessionStorage } from '@/utils/storage';\n\nexport default function DashboardPage() {\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n  const router = useRouter();\n  const [uploadError, setUploadError] = useState('');\n  const [isUploading, setIsUploading] = useState(false);\n\n  const handleBrowseClick = () => {\n    setUploadError('');\n    fileInputRef.current?.click();\n  };\n\n  const handleFileChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    setIsUploading(true);\n    setUploadError('');\n\n    const result = await handlePdfUpload(file);\n\n    if (result.success && result.fileName && result.dataUrl) {\n      sessionStorage.setUploadedPdf(result.fileName, result.dataUrl);\n      router.push('/dashboard/resumes/preview');\n    } else {\n      setUploadError(result.error || 'Failed to upload PDF');\n      setIsUploading(false);\n    }\n\n    event.target.value = '';\n  };\n\n  return (\n    <div className=\"p-8\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <div className=\"flex items-center gap-2 mb-2\">\n          <h1 className=\"text-3xl font-bold text-slate-900 dark:text-white\">\n            Welcome back, Alok!\n          </h1>\n          <span className=\"text-3xl\">ðŸ‘‹</span>\n        </div>\n        <p className=\"text-slate-600 dark:text-slate-400\">\n          Let's create your next job-winning resume. Choose how you want to start.\n        </p>\n      </div>\n\n      {/* Action Cards */}\n      <div className=\"grid md:grid-cols-3 gap-6 mb-12\">\n        {/* Upload Resume */}\n        <div className=\"border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-2xl p-8 text-center hover:border-[#1a47e8] dark:hover:border-blue-500 transition bg-white dark:bg-slate-900\">\n          <div className=\"mb-6\">\n            <div className=\"mx-auto w-20 h-20 rounded-2xl bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center mb-4\">\n              <svg className=\"h-10 w-10 text-[#1a47e8]\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n              </svg>\n            </div>\n            <h3 className=\"text-xl font-semibold text-slate-900 dark:text-white mb-2\">\n              Upload your resume\n            </h3>\n            <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-6\">\n              Drag & drop your existing resume here (PDF only) to preview it.\n            </p>\n          </div>\n          <button\n            onClick={handleBrowseClick}\n            className=\"inline-flex items-center gap-2 px-6 py-3 bg-[#1a47e8] hover:bg-[#0f32b8] text-white font-semibold rounded-lg transition disabled:opacity-60 disabled:cursor-not-allowed\"\n            disabled={isUploading}\n          >\n            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n            </svg>\n            {isUploading ? 'Uploadingâ€¦' : 'Browse files'}\n          </button>\n          {uploadError && (\n            <p className=\"mt-4 text-sm text-red-600 dark:text-red-400\">{uploadError}</p>\n          )}\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\"application/pdf\"\n            onChange={handleFileChange}\n            className=\"hidden\"\n          />\n        </div>\n\n        {/* Start from Scratch */}\n        <div className=\"relative border-2 border-slate-200 dark:border-slate-700 rounded-2xl p-8 text-center bg-linear-to-b from-blue-50 to-white dark:from-slate-800 dark:to-slate-900 hover:shadow-lg transition\">\n          <div className=\"absolute top-4 right-4 px-3 py-1 bg-emerald-500 text-white text-xs font-bold rounded-full\">\n            RECOMMENDED\n          </div>\n          <div className=\"mb-6\">\n            <div className=\"mx-auto w-20 h-20 rounded-2xl bg-white dark:bg-slate-950 shadow-sm flex items-center justify-center mb-4\">\n              <svg className=\"h-10 w-10 text-[#1a47e8]\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-xl font-semibold text-slate-900 dark:text-white mb-2\">\n              Start from Scratch\n            </h3>\n            <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-6\">\n              No resume? No problem. Use our professional builder with smart templates to create a standout CV in minutes.\n            </p>\n          </div>\n          <Link\n            href=\"/dashboard/resumes/new\"\n            className=\"inline-flex items-center gap-2 px-6 py-3 bg-[#1a47e8] hover:bg-[#0f32b8] text-white font-semibold rounded-lg transition\"\n          >\n            Start Blank\n            <svg className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 5l7 7-7 7\" />\n            </svg>\n          </Link>\n        </div>\n\n        {/* Browse Templates */}\n        <div className=\"border-2 border-slate-200 dark:border-slate-700 rounded-2xl p-8 bg-white dark:bg-slate-900 hover:shadow-lg transition flex flex-col\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <span className=\"px-3 py-1 rounded-full bg-amber-100 text-amber-700 text-xs font-bold\">NEW</span>\n            <span className=\"text-xs text-slate-500 dark:text-slate-400\">Gallery</span>\n          </div>\n          <h3 className=\"text-xl font-semibold text-slate-900 dark:text-white mb-2\">Explore Templates</h3>\n          <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-6 flex-1\">\n            Pick a design from our gallery and send it straight to preview. Switching clears any previous preview.\n          </p>\n          <Link\n            href=\"/dashboard/resumes/templates\"\n            className=\"inline-flex items-center justify-center gap-2 px-6 py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-semibold rounded-lg hover:opacity-90 transition\"\n          >\n            Open Template Gallery\n            <svg className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 5l7 7-7 7\" />\n            </svg>\n          </Link>\n        </div>\n      </div>\n\n      {/* Recent Activity */}\n      <div>\n        <h2 className=\"text-xl font-semibold text-slate-900 dark:text-white mb-4\">Recent Activity</h2>\n        <div className=\"border border-slate-200 dark:border-slate-800 rounded-2xl bg-white dark:bg-slate-900 p-12 text-center\">\n          <div className=\"mx-auto w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center mb-4\">\n            <svg className=\"h-8 w-8 text-slate-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n          </div>\n          <p className=\"text-slate-500 dark:text-slate-400\">No recent activity found</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * File upload utility functions\n */\n\nexport interface UploadResult {\n  success: boolean;\n  fileName?: string;\n  dataUrl?: string;\n  error?: string;\n}\n\nexport const validatePdfFile = (file: File): { valid: boolean; error?: string } => {\n  if (file.type !== 'application/pdf') {\n    return { valid: false, error: 'Please upload a PDF file.' };\n  }\n  \n  // Optional: Check file size (e.g., 10MB limit)\n  const maxSize = 10 * 1024 * 1024; // 10MB\n  if (file.size > maxSize) {\n    return { valid: false, error: 'File size should be less than 10MB.' };\n  }\n  \n  return { valid: true };\n};\n\nexport const readFileAsDataURL = (file: File): Promise<string> => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n      resolve(reader.result as string);\n    };\n    reader.onerror = () => {\n      reject(new Error('Could not read the file. Please try again.'));\n    };\n    reader.readAsDataURL(file);\n  });\n};\n\nexport const handlePdfUpload = async (file: File): Promise<UploadResult> => {\n  const validation = validatePdfFile(file);\n  if (!validation.valid) {\n    return { success: false, error: validation.error };\n  }\n\n  try {\n    const dataUrl = await readFileAsDataURL(file);\n    return {\n      success: true,\n      fileName: file.name,\n      dataUrl,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to upload file.',\n    };\n  }\n};\n"],"names":[],"mappings":"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"}